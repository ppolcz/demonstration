Mathematica 8.0 for Mac OS X x86 (64-bit)
Copyright 1988-2011 Wolfram Research, Inc.

In[1]:= 
Out[1]= {stdout}

In[2]:= SetOptions[$Output,PageWidth->80];

In[3]:= 
In[3]:= (* ADJUST YOUR DIRECTORY SETTINGS HERE! *)

In[4]:= SetDirectory[$HomeDirectory <> "/work/projects/ipsolver"]

Out[4]= /Users/mauricio/work/projects/ipsolver

In[5]:= 
In[5]:= << SDP`

In[6]:= << SDPSylvester`

In[7]:= 
In[7]:=                         SolveProblem[fileName_, solution_, stream_, results_] := Module[
  {
    maxTimeSDP = 1800, (* Seconds allowed to finish SDP *)
    time1 = 0, time2 = 0, (* Used for timing *)
    out, (* output from SDPSolve calls *)
    Id, Ze
  },

  WriteString[stream, "Running... ", fileName, "\n"];
  
  (* Load problem file *)
  Get[fileName];

  WriteString[stream, \
              (nx*(nx+1))/2+(nz*(nz+1))/2+nx*nu, " variables. W is ", nz, \
              "x", nz, ", L is ", nu, "x", nx, ", X is ", nx, "x", nx, "\n"];

  (* Setup Leibfritz H_2 problem *)

  Id[n_] := IdentityMatrix[n] // N;
  Ze[m_, n_] := ConstantArray[0, {m, n}] // N;

  C1X = ArrayFlatten[{{C1}, {Ze[nx, nx]}}];
  IdX = ArrayFlatten[{{Ze[nz, nx]}, {Id[nx]}}];
  D12L = ArrayFlatten[{{D12}, {Ze[nx, nu]}}];
  IdW = ArrayFlatten[{{Id[nz]}, {Ze[nx, nz]}}];

  AA = {
     (* A X + B L + 0 W < -B1 B1^T *)
     {
       {2 A, Id[nx]}, 
       {2 B, Id[nx]}, 
       {Ze[nx, nz], Ze[nz, nx]}
     },
     (* -[W, C1 X + L D12; X C1^T + D12^T L^T X] < 0 *)
     {
       {ArrayFlatten[{{-IdX, -2 C1X}}],
        ArrayFlatten[{{Transpose[IdX], Transpose[IdX]}}]},
       {-2 D12L, Transpose[IdX]}, 
       {- IdW, Transpose[IdW]}
     }
   };
  CC = {-B1.Transpose[B1], Ze[nx + nz, nx + nz]};
  BB = {Ze[nx, nx], Ze[nu, nx], -Id[nz]};

  (* Run the algorithm *)

  WriteString[stream, "Starting SDP Solver...\n"];

  time1 = TimeUsed[];

  out = TimeConstrained[
          SDPSolve[{AA, BB, CC}, 
                   SymmetricVariables -> {1, 3}, 
                   DebugLevel -> 0],
          maxTimeSDP 
        ];

  time2 = TimeUsed[];

  WriteString[stream, "Done.\n"];

  If [ out === $Aborted, 

     Print["Can't optimize in ", maxTimeSDP, " seconds."];
     WriteString[stream, "Can't optimize in ", maxTimeSDP, \
                 " seconds.\n\n\n"];

     status = "TIMEOUT";

    ,

     status = "SUCCESS";

  ];

  (* Write results *)
  PutAppend[{fileName, DateString[], status, time2-time1,
             $MachineName, $MachineType, $ProcessorType}, results];

  (* Write solution *)
  Put[out, solution];

  Return[];

];

In[8]:= 
In[8]:= (* Extract problem to run from input line *)

In[9]:= 
In[9]:= problemCode = ToFileName["COMPleib", $CommandLine[[2]]];

In[10]:= solutionFileName = ToFileName["COMPleib", $CommandLine[[3]]];

In[11]:= outputFileName = ToFileName["COMPleib", $CommandLine[[4]]];

In[12]:= resultsFileName = ToFileName["COMPleib", $CommandLine[[5]]];

In[13]:= 
In[13]:= outputStream = If[ FileExistsQ[outputFileName], 
                   OpenAppend[outputFileName], 
                   OpenWrite[outputFileName] ];

In[14]:= SetOptions[outputStream, FormatType -> StandardForm];

In[15]:= 
In[15]:= SolveProblem[ problemCode <> ".m", solutionFileName, 
              outputStream, resultsFileName ];
 -------------------------------------------------------------------
 Problem data:
 * Dimensions (total):
   - Variables             = 3444
   - Inequalities          = 2
 * Dimensions (detail):
   - Variables             = {{40, 40}, {2, 40}, {42, 42}}
   - Inequalities          = {40, 82}

 Method:
 * Method                  = PredictorCorrector
 * Search direction        = NT

 Precision:
 * Gap tolerance           = 1.e-9
 * Rationalize iterates    = False

 Other options:
 * Debug level             = 0

  K    <B, Y>           mu    theta/tau        alpha       |X S|2      |X S|oo 
 
>     ~|A X - B|  ~|A* X - C|
 -----------------------------------------------------
 
>   ------------------------------------------------------
  1  9.2487 E -1  3.0481 E -1  3.0962 E -1  7.3572 E -1  1.3813 E  0 
 
>    9.9785 E -1  1.3317 E-11  7.0028 E-16          
  2  3.1623 E  0  1.2982 E -1  1.5513 E -1  5.7408 E -1  1.6657 E  0 
 
>    9.7172 E -1  1.4495 E -9  7.2187 E-16          
  3  5.6552 E  0  6.7730 E -2  1.0552 E -1  4.7830 E -1  1.8649 E  0 
 
>    9.8163 E -1  1.5983 E -9  7.4745 E-16          
  4  7.6220 E  0  5.6821 E -2  1.1147 E -1  1.6107 E -1  2.1791 E  0 
 
>    9.6607 E -1  1.9714 E -9  7.4625 E-16          
  5  7.8939 E  0  3.1798 E -2  6.5799 E -2  4.4038 E -1  5.5709 E  0 
 
>    9.7713 E -1  1.9944 E -9  6.8241 E-16          
  6  9.9123 E  0  2.4840 E -2  6.9707 E -2  2.2810 E -1  5.8204 E  0 
 
>    9.5337 E -1  4.0468 E -9  7.6152 E-16          
  7  1.9164 E  1  8.5423 E -3  5.2076 E -2  6.5610 E -1  7.0109 E  0 
 
>    9.4892 E -1  5.5512 E -9  7.4716 E-16          
  8  2.4191 E  1  3.2068 E -3  2.8546 E -2  6.2460 E -1  7.1999 E  0 
 
>    9.4743 E -1  5.6924 E -9  7.3462 E-16          
  9  3.9305 E  1  9.6538 E -4  1.9747 E -2  6.9895 E -1  6.0836 E  0 
 
>    9.4250 E -1  7.0473 E -9  7.3497 E-16          
 10  6.2276 E  1  2.6162 E -4  1.2034 E -2  7.2900 E -1  4.4469 E  0 
 
>    9.3778 E -1  7.8747 E -9  7.4447 E-16          
 11  6.9221 E  1  2.0269 E -4  1.1783 E -2  2.4632 E -1  4.9850 E  0 
 
>    9.1822 E -1  8.1013 E -9  7.4065 E-16          
 12  1.0451 E  2  6.9705 E -5  8.6068 E -3  6.5610 E -1  5.0398 E  0 
 
>    9.1678 E -1  8.3739 E -9  7.3784 E-16          
 13  1.2182 E  2  4.1341 E -5  7.0209 E -3  4.0697 E -1  6.3630 E  0 
 
>    9.2100 E -1  8.4260 E -9  7.4023 E-16          
 14  1.7774 E  2  1.2020 E -5  4.1972 E -3  7.0924 E -1  5.2128 E  0 
 
>    9.1654 E -1  8.4845 E -9  7.4229 E-16          
 15  2.1588 E  2  6.9941 E -6  3.7375 E -3  4.1827 E -1  6.1228 E  0 
 
>    9.2060 E -1  8.4329 E -9  7.4153 E-16          
 16  3.2166 E  2  1.9688 E -6  2.2848 E -3  7.1851 E -1  4.6481 E  0 
 
>    9.1448 E -1  8.5026 E -9  7.4382 E-16          
 17  3.3341 E  2  1.7306 E -6  2.2164 E -3  1.6342 E -1  5.0742 E  0 
 
>    8.7601 E -1  8.5191 E -9  7.4400 E-16          
 18  3.4677 E  2  1.5012 E -6  2.1383 E -3  1.7906 E -1  5.6420 E  0 
 
>    8.3697 E -1  8.5050 E -9  7.4395 E-16          
 19  3.6099 E  2  1.2959 E -6  2.0565 E -3  1.8712 E -1  6.2559 E  0 
 
>    7.9797 E -1  8.5055 E -9  7.4381 E-16          
 20  3.7561 E  2  1.1189 E -6  1.9744 E -3  1.9085 E -1  6.8492 E  0 
 
>    7.5953 E -1  8.5045 E -9  7.4520 E-16          
 21  3.9028 E  2  9.6915 E -7  1.8942 E -3  1.9192 E -1  7.3807 E  0 
 
>    7.2203 E -1  8.5124 E -9  7.4413 E-16          
 22  4.0482 E  2  8.4347 E -7  1.8170 E -3  1.9146 E -1  7.8287 E  0 
 
>    6.8574 E -1  8.5107 E -9  7.4455 E-16          
 23  4.1909 E  2  7.3819 E -7  1.7435 E -3  1.9029 E -1  8.1842 E  0 
 
>    6.5086 E -1  8.5074 E -9  7.4453 E-16          
 24  4.3304 E  2  6.4975 E -7  1.6739 E -3  1.8896 E -1  8.4466 E  0 
 
>    6.1752 E -1  8.5065 E -9  7.4518 E-16          
 25  4.4667 E  2  5.7506 E -7  1.6080 E -3  1.8780 E -1  8.6204 E  0 
 
>    5.8584 E -1  8.5068 E -9  7.4574 E-16          
 26  4.6000 E  2  5.1157 E -7  1.5458 E -3  1.8696 E -1  8.7125 E  0 
 
>    5.5591 E -1  8.5053 E -9  7.4568 E-16          
 27  4.7305 E  2  4.5722 E -7  1.4870 E -3  1.8647 E -1  8.7314 E  0 
 
>    5.2780 E -1  8.5041 E -9  7.4640 E-16          
 28  4.8584 E  2  4.1042 E -7  1.4315 E -3  1.8630 E -1  8.6862 E  0 
 
>    5.0154 E -1  8.5047 E -9  7.4601 E-16          
 29  4.9842 E  2  3.6990 E -7  1.3792 E -3  1.8634 E -1  8.5858 E  0 
 
>    4.7716 E -1  8.5055 E -9  7.4616 E-16          
 30  5.1078 E  2  3.3465 E -7  1.3301 E -3  1.8649 E -1  8.4395 E  0 
 
>    4.5466 E -1  8.5049 E -9  7.4625 E-16          
 31  5.2297 E  2  3.0389 E -7  1.2843 E -3  1.8662 E -1  8.2559 E  0 
 
>    4.3399 E -1  8.5039 E -9  7.4622 E-16          
 32  5.3499 E  2  2.7698 E -7  1.2417 E -3  1.8660 E -1  8.0437 E  0 
 
>    4.1509 E -1  8.5037 E -9  7.4639 E-16          
 33  5.4685 E  2  2.5339 E -7  1.2024 E -3  1.8636 E -1  7.8116 E  0 
 
>    3.9788 E -1  8.5042 E -9  7.4603 E-16          
 34  5.5858 E  2  2.3268 E -7  1.1665 E -3  1.8584 E -1  7.5678 E  0 
 
>    3.8225 E -1  8.5035 E -9  7.4609 E-16          
 35  5.7020 E  2  2.1447 E -7  1.1339 E -3  1.8510 E -1  7.3209 E  0 
 
>    3.6807 E -1  8.5041 E -9  7.4609 E-16          
 36  5.8177 E  2  1.9839 E -7  1.1045 E -3  1.8429 E -1  7.0790 E  0 
 
>    3.5520 E -1  8.5038 E -9  7.4588 E-16          
 37  5.9334 E  2  1.8414 E -7  1.0780 E -3  1.8366 E -1  6.8502 E  0 
 
>    3.4349 E -1  8.5039 E -9  7.4581 E-16          
 38  6.0498 E  2  1.7141 E -7  1.0542 E -3  1.8359 E -1  6.6420 E  0 
 
>    3.3280 E -1  8.5036 E -9  7.4580 E-16          
 39  6.1682 E  2  1.5992 E -7  1.0325 E -3  1.8449 E -1  6.4610 E  0 
 
>    3.2298 E -1  8.5042 E -9  7.4584 E-16          
 40  6.2897 E  2  1.4942 E -7  1.0125 E -3  1.8678 E -1  6.3127 E  0 
 
>    3.1392 E -1  8.5041 E -9  7.4582 E-16          
 41  6.4158 E  2  1.3970 E -7  9.9357 E -4  1.9086 E -1  6.2004 E  0 
 
>    3.0548 E -1  8.5039 E -9  7.4578 E-16          
 42  6.5483 E  2  1.3055 E -7  9.7522 E -4  1.9709 E -1  6.1252 E  0 
 
>    2.9757 E -1  8.5042 E -9  7.4574 E-16          
 43  6.6891 E  2  1.2182 E -7  9.5686 E -4  2.0578 E -1  6.0853 E  0 
 
>    2.9010 E -1  8.5045 E -9  7.4564 E-16          
 44  6.8406 E  2  1.1337 E -7  9.3795 E -4  2.1720 E -1  6.0757 E  0 
 
>    2.8299 E -1  8.5043 E -9  7.4577 E-16          
 45  7.0055 E  2  1.0509 E -7  9.1799 E -4  2.3156 E -1  6.0875 E  0 
 
>    2.7618 E -1  8.5052 E -9  7.4605 E-16          
 46  7.1869 E  2  9.6906 E -8  8.9652 E -4  2.4893 E -1  6.1089 E  0 
 
>    2.6960 E -1  8.5054 E -9  7.4603 E-16          
 47  7.3885 E  2  8.8776 E -8  8.7316 E -4  2.6912 E -1  6.1250 E  0 
 
>    2.6320 E -1  8.5058 E -9  7.4601 E-16          
 48  7.6146 E  2  8.0700 E -8  8.4769 E -4  2.9154 E -1  6.1196 E  0 
 
>    2.5693 E -1  8.5056 E -9  7.4607 E-16          
 49  7.8695 E  2  7.2723 E -8  8.2009 E -4  3.1501 E -1  6.0779 E  0 
 
>    2.5075 E -1  8.5054 E -9  7.4604 E-16          
 50  8.1576 E  2  6.4934 E -8  7.9060 E -4  3.3780 E -1  5.9896 E  0 
 
>    2.4535 E -1  8.5055 E -9  7.4610 E-16          
 51  8.4830 E  2  5.7453 E -8  7.5969 E -4  3.5790 E -1  5.8521 E  0 
 
>    2.4738 E -1  8.5050 E -9  7.4612 E-16          
 52  8.8495 E  2  5.0401 E -8  7.2793 E -4  3.7355 E -1  5.6729 E  0 
 
>    2.5010 E -1  8.5051 E -9  7.4600 E-16          
 53  9.2611 E  2  4.3869 E -8  6.9591 E -4  3.8388 E -1  5.4686 E  0 
 
>    2.5308 E -1  8.5051 E -9  7.4600 E-16          
 54  9.7232 E  2  3.7906 E -8  6.6406 E -4  3.8908 E -1  5.2622 E  0 
 
>    2.5636 E -1  8.5051 E -9  7.4582 E-16          
 55  1.0243 E  3  3.2516 E -8  6.3259 E -4  3.9017 E -1  5.0784 E  0 
 
>    2.6003 E -1  8.5048 E -9  7.4583 E-16          
 56  1.0832 E  3  2.7669 E -8  6.0146 E -4  3.8852 E -1  4.9393 E  0 
 
>    2.6424 E -1  8.5051 E -9  7.4594 E-16          
 57  1.1506 E  3  2.3320 E -8  5.7045 E -4  3.8538 E -1  4.8616 E  0 
 
>    2.6918 E -1  8.5054 E -9  7.4598 E-16          
 58  1.2283 E  3  1.9425 E -8  5.3921 E -4  3.8156 E -1  4.8541 E  0 
 
>    2.7508 E -1  8.5054 E -9  7.4596 E-16          
 59  1.3190 E  3  1.5951 E -8  5.0741 E -4  3.7716 E -1  4.9187 E  0 
 
>    2.8222 E -1  8.5054 E -9  7.4594 E-16          
 60  1.4252 E  3  1.2886 E -8  4.7495 E -4  3.7157 E -1  5.0520 E  0 
 
>    2.9088 E -1  8.5054 E -9  7.4591 E-16          
 61  1.5496 E  3  1.0233 E -8  4.4210 E -4  3.6427 E -1  5.2473 E  0 
 
>    3.0128 E -1  8.5055 E -9  7.4601 E-16          
 62  1.6954 E  3  7.9874 E -9  4.0931 E -4  3.5641 E -1  5.4990 E  0 
 
>    3.1350 E -1  8.5053 E -9  7.4601 E-16          
 63  1.8675 E  3  6.1206 E -9  3.7672 E -4  3.5110 E -1  5.8012 E  0 
 
>    3.2755 E -1  8.5056 E -9  7.4604 E-16          
 64  2.0208 E  3  4.9286 E -9  3.5265 E -4  2.7300 E -1  6.0921 E  0 
 
>    3.4194 E -1  8.5058 E -9  7.4604 E-16          
 65  2.1629 E  3  4.0959 E -9  3.3366 E -4  2.2578 E -1  6.3513 E  0 
 
>    3.5551 E -1  8.5059 E -9  7.4598 E-16          
 66  2.3012 E  3  3.4658 E -9  3.1739 E -4  2.2310 E -1  6.4908 E  0 
 
>    3.6312 E -1  8.5059 E -9  7.4598 E-16          
 67  2.4429 E  3  2.9560 E -9  3.0256 E -4  2.3021 E -1  6.5318 E  0 
 
>    3.6584 E -1  8.5061 E -9  7.4590 E-16          
 68  2.5926 E  3  2.5280 E -9  2.8858 E -4  2.3996 E -1  6.5026 E  0 
 
>    3.6505 E -1  8.5062 E -9  7.4590 E-16          
 69  2.7534 E  3  2.1624 E -9  2.7528 E -4  2.5025 E -1  6.4280 E  0 
 
>    3.6183 E -1  8.5061 E -9  7.4589 E-16          
 70  2.9298 E  3  1.8450 E -9  2.6249 E -4  2.6203 E -1  6.3318 E  0 
 
>    3.5730 E -1  8.5063 E -9  7.4591 E-16          
 71  3.1308 E  3  1.5613 E -9  2.4968 E -4  2.7944 E -1  6.2363 E  0 
 
>    3.5253 E -1  8.5064 E -9  7.4593 E-16          
 72  3.3728 E  3  1.2969 E -9  2.3585 E -4  3.0739 E -1  6.1606 E  0 
 
>    3.4774 E -1  8.5065 E -9  7.4590 E-16          
 73  3.6808 E  3  1.0425 E -9  2.1963 E -4  3.4718 E -1  6.1225 E  0 
 
>    3.4380 E -1  8.5065 E -9  7.4592 E-16          
 74  4.0790 E  3  8.0225 E-10  2.0030 E -4  3.8660 E -1  6.1437 E  0 
 
>    3.4267 E -1  8.5066 E -9  7.4591 E-16          
 -------------------------------------------------------------------
 
>   ---------------------------
* Primal solution is not strictly feasible
(max eig(A* X - C) = 0.000187178 > 0)
* Dual solution is not within tolerance
                                 -9
(|| A X - B || = 11.0973 >= 1. 10  )

In[16]:= 
In[16]:= Close[outputStream];

In[17]:= 
In[17]:= $Echo = DeleteCases[$Echo, "stdout"];

In[18]:= 
